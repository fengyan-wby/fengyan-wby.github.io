---
title: 量化交易学习
date: 2023-10-25 10:26:53
categories: 算法
tags: ["量化交易"]
---

量化交易是指以先进的数学模型代替人为的主观判断，利用计算机技术，从庞大的历史数据中筛选出能带来超额收益的多种大概率事件以制定策略，极大地减少投资者情绪波动所带来的影响，避免在市场极度狂热或悲观的情况下做出非理性的投资决策的一种交易方式。其核心思想是通过系统性的方法捕捉市场中的价格和波动性变化，从而实现更稳定和可持续的投资回报。在量化交易中，交易决策通常基于大量的历史市场数据，利用计算机程序来自动执行交易。

量化交易的基本步骤包括数据收集、模型构建、策略测试和实际交易。首先，交易者需要收集各种市场数据；然后，利用统计学和机器学习技术来构建数学模型，分析市场的历史行为、寻找规律和模式。接下来，交易者会通过历史数据模拟不同的交易策略，以评估其在不同市场环境下的表现。一旦找到有效的策略，交易者就会将其应用于实际交易中。

量化交易的优势在于它能够消除情绪和主观因素对交易决策的影响，从而减少人为错误。它具有较强的纪律性，能克制人性中的贪婪、恐惧和侥幸心理等弱点。此外，量化交易可以在瞬间执行大量交易，实现高效的交易操作。不过，量化交易也面临着一些挑战，包括数据质量、模型过拟合、市场变化等，需要我们实时监控策略的有效性。

以下内容转载自[https://www.joinquant.com/](https://www.joinquant.com/)。

<!-- more -->

## 初识量化交易

### 为什么需要量化交易？

* 它能让你的交易效率提高百倍，量化交易之于传统交易方法，如同大型收割机之于锄头镰刀，机枪大炮之于刀剑棍棒。
* 也就是是说，传统交易方法是这样的：
![ ](量化交易学习/1.jpeg)  
而量化交易是这样的：
![ ](量化交易学习/2.jpeg)

在金融最为发达的美国，量化交易已大行其道，占据了70%以上的股市成交量。可以说量化交易是未来的趋势。当然，只言片语不能解释清楚，接下来，我们具体地介绍下量化交易。

### 量化交易是做什么？

量化交易是指借助现代统计学和数学的方法，利用计算机技术来进行交易的证券投资方式。便于理解的说，量化交易主要是做这样的事：

1. `从一个灵感开始`
	* 灵感就是指那些你想验证的可能会盈利的方法，比如银行股可能是良好的投资品种、一旦跨过20日均线后股价会继续涨、流传许久的羊驼交易法等等。灵感获取的方式可以是阅读、听人说、自己悟等等。
	* 这里我们以一个简单的情况为例进行讲解。比如你的灵感是这样的：
	```txt
	如果股价显著低于近几日的平均价，则买入
	如果股价显著高于近几日的平均价，则卖出
	```
	* 现在，你想知道这样操作究竟会不会赚钱？
2. `把灵感细化成明确的可执行的交易策略`
	* 一般灵感都很模糊，需要将其细化成明确的可执行的策略，目的是为了能得到确定的结果，以及为后续程序化准备。比如，你通过阅读了解到索罗斯的反身性概念，想将它应用到股市，这个反身性就很模糊，就需要明确什么条件下买卖，买卖什么品种，买卖多少量等，从而形成一个明确的交易策略，让不同人根据你的描述在相同情形下都能做出相同的操作。
	* 继续以之前那个关于平均价的灵感为例：
	```txt
	如果股价显著低于近几日的平均价，则买入
	如果股价显著高于近几日的平均价，则卖出
	```
	* 显然它是不够明确的。比如多低叫显著低于？多高叫显著高于？近几日究竟是几日？买入卖出是买卖多少？我们把它细化：  
	```txt
	如果股价低于近20日平均价10%，则用全部可用资金买入
	如果股价高于近20日平均价10%，则卖出全部所持的该股票
	```
	* 还有一点不明确的地方，买卖哪个股票呢？我们认为这个交易方法盈利与否应该跟交易哪个股票关系不大，但st股票除外（知道st股票是一类有风险特别大的股票就好，详情请百度），所以股票的选择范围是除st股外的国内A股的所有股票。所以我们进一步细化：
	```txt
	每个交易日监测是除st股外的国内A股的所有股票的股价
	如果股价低于近20日平均价10%，则用全部可用资金买入该股票
	如果股价高于近20日平均价10%，则卖出全部所持有的该股票
	```
	* 现在我们基本已经把之前的灵感细化成明确的可执行的**交易策略**。当然，可能还有些地方不够明确，也可能有些细节还不确定要改动，这些可以随时想到随时再改，不必一次做到完美。
3. `把策略转成程序`
	* 这一步就是把明确后的策略通过编程转成程序，好让计算机能根据历史数据模拟执行该策略，以及能根据实际行情进行反应并模拟交易或真实交易。
	* 简言之，就是把刚刚的策略翻译成计算机可识别的代码语言，即把这个：
	```txt
	每个交易日监测是除st股外的国内A股的所有股票的股价
	如果股价低于近20日平均价10%，则用全部可用资金买入该股票
	如果股价高于近20日平均价10%，则卖出全部所持有的该股票
	```
	写成类似这样的代码（下面的代码并不完全符合，只是展示下大概的样子）：
	```python
	def initialize(context):
		g.security = ['002043.XSHE','002582.XSHE']

	def handle_data(context, data):
		for i in g.security:
			last_price = data[i].close
			average_price = data[i].mavg(20, "close")
			cash = context.portfolio.cash
			if last_price > average_price:
				order_value(i, cash)
			elif last_price < average_price:
				order_target(i, 0)
	```
	* 这样一来，就把刚才细化好策略转成了代码程序，计算机就能运行了。这个过程你可以理解成用计算机能听懂的语言（代码），把你的策略告诉给计算机了。
4. `检验策略效果`
	* 现在计算机理解了你的策略，你现在可以借助计算机的力量来验证你的策略了。基本的检验策略方法有回测和模拟交易两种方法。
	* 回测是让计算机能根据一段时间的**历史数据**模拟执行该策略，根据结果评价并改进策略。继续之前的那个均价的策略例子的话就是这样的：
		* 设定初始的虚拟资产比如500000元、一个时期比如20060101到20160101，把这一时期的各种数据如估计股价行情等发给计算机，计算机会利用这些数据模仿真实的市场，执行你刚才告诉它的策略程序。最后计算机会给你一份报告，根据这个报告你就会知道，在20060101的500000元，按照你的策略交易到20160101，会怎样？一般包括盈亏情况，下单情况，持仓变化，以及一些统计指标等，从而你能据此评估交易策略的好坏。
		* 如果结果不好，则需要分析原因并改进。如果结果不错，则可以考虑用模拟交易进一步验证。
	* 模拟交易是让计算机能根据**实际行情**模拟执行该策略一段时间，根据结果评价并改进策略。与回测不同，回测是用历史数据模拟，模拟交易使用实际的实时行情来模拟执行策略的。举例就是这样：
		* 设定初始的虚拟资产比如500000元，选择开始执行模拟交易的时间点，比如明天。那么从明天开始，股市开始交易，真实的行情数据就会实时地发送到计算机，计算机会利用真实的数据模仿真实的市场，执行你的策略程序。同时，你会得到一份实时更新的报告。这报告类似于回测得到的报告，不同的是会根据实际行情变化更新。同样你能据此评估交易策略的好坏。
5. `进行实盘交易并不断维护修正`
	* 实盘交易就是让计算机能自动根据实际行情，用真金白银自动执行策略，进行下单交易。注意，这时不再是用虚拟资产模拟交易，亏损和盈利都是真钱。实盘交易一般也会给出一份类似模拟交易的会不断更新的报告，从而不断要观察策略的实盘表现并及时调整与改进策略，使之持续平稳盈利。
	
### 量化交易的价值何在？

量化交易的价值有很多，只提下最突出的价值所在。

* `可以利用大量历史数据检验策略，效率提升百倍`。当我们想验证交易策略的时候，一个基本的想法是想知道它在历史上表现如何，这往往需要大量的历史数据与计算量，量化交易做一次回测可能几分钟就可以得到结果了，相比于传统人工做法效率的提升是成百倍的。
* `更科学更客观的衡量交易策略的效果`。比如一个关于某技术指标的策略，人工的进行了10个交易日的验证，效果都不错，但这就能说明这指标不错吗？不，10次太少了，你需要更多的验证，比如1000个交易日，人工验证不可行，量化交易则又快又准。而且量化交易还可以利用数学与统计学自动给出客观的结果，比如年化收益率、最大回撤率、夏普比率等。
* `全市场实时捕捉交易机会`。当你知道一个盈利条件，当股价一旦满足这条件，你就可以操作盈利。问题是，市场几千个股票，股价时时刻刻都在变动，你能盯住几个，你会错失多少个机会。但量化交易可以利用计算机全市场实时盯盘，可以不错过任何交易机会，加倍你的盈利能力。
* `更多的盈利机会`。量化交易可以利用计算机对海量数据分析得到常人难以发现的盈利机会，而且有些机会只有量化交易才能利用。比如你发现一种交易方法，其特点是盈亏的额度相等，但盈利的概率是55%，亏损概率45%。首先这种小差距的概率规律，非量化交易不能发现，其次，要利用这个规律盈利需要大量次数的交易才能稳定盈利，这也非量化交易不可。

### 做量化交易需要什么？

* `要有各种数据`。要有能方便使用的各种投资相关的数据。这要考虑到各种数据的收集、存储、清洗、更新，以及数据取用时的便捷、速度、稳定。
* `还要有一套量化交易的系统`，要有能编写策略、执行策略、评测策略的系统。这要考虑到系统对各种策略编写的支持、系统进行回测与模拟的高仿真、系统执行策略的高速、系统评测策略的科学可靠全方面。

### 聚宽是什么？

聚宽是一家量化投研平台，为投资者提供做量化交易的工具与服务，帮助投资者更好地做量化交易。也就是说，在聚宽量化投研平台，“大型收割机”已经为你准备好了，不需要你自己造了，你只需要学会使用它。

## 需要阅读的书籍和资料

* 《打开量化投资的黑箱》
* 《海龟交易法则》
* 《股票作手回忆录》
* 《财报就像一本故事书》
